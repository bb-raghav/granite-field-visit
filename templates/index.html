<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Team Phantom â€” Granite Field Visit</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b1220;
      --card:#0f1b34;
      --muted:#9aa6c3;
      --fg:#e9ecf5;
      --acc:#22d3ee;
      --r:18px;
      --sh:0 20px 50px rgba(0,0,0,.45)
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      font-family:Inter;
      background:var(--bg);
      color:var(--fg)
    }

    .app{
      display:grid;
      grid-template-columns:260px 1fr;
      height:100vh
    }

    aside{
      padding:25px;
      background:#0f172a
    }

    nav button{
      all:unset;
      display:block;
      padding:12px;
      margin-bottom:10px;
      border-radius:10px;
      cursor:pointer;
      border:1px solid #1a2b55
    }

    nav button.active{
      background:#12254a;
      border-color:var(--acc)
    }

    main{
      padding:40px;
      overflow:auto
    }

    h1{font-size:48px}
    h2{margin-top:0}

    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
      gap:20px
    }

    .card{
      background:var(--card);
      padding:20px;
      border-radius:var(--r);
      box-shadow:var(--sh)
    }

    .muted{color:var(--muted)}

    /* Gallery */
    .gallery{
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(250px,1fr));
      gap:15px
    }

    .gallery img{
      width:100%;
      border-radius:12px;
      cursor:pointer
    }

    .lightbox{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.8);
      display:none;
      align-items:center;
      justify-content:center
    }

    .lightbox.open{display:flex}

    .lightbox img{
      max-width:90%;
      max-height:90%
    }
  </style>
</head>

<body>
<div class="app">

  <aside>
    <h3>Team Phantom</h3>
    <nav>
      <button class="active" data-tab="overview">Overview</button>
      <button data-tab="gallery">Gallery</button>
      <button data-tab="report">Report</button>
    </nav>
  </aside>

  <main>

    <!-- OVERVIEW -->
    <section id="overview">
      <h1>Granite Manufacturing Visit</h1>
      <div class="grid">
        <div class="card">Dust hazards & safety issues observed</div>
        <div class="card">Heavy slab handling challenges</div>
        <div class="card">Automation improvements proposed</div>
      </div>
    </section>

    <!-- GALLERY -->
    <section id="gallery" hidden>
      <h2>Gallery</h2>

      <div class="gallery">

        {% for img in trip %}
        <img src="{{ url_for('static', filename='gallery/'+img) }}" onclick="openLightbox(this.src)">
        {% endfor %}

        {% for img in machines %}
        <img src="{{ url_for('static', filename='machines/'+img) }}" onclick="openLightbox(this.src)">
        {% endfor %}

        {% for img in safety %}
        <img src="{{ url_for('static', filename='safety/'+img) }}" onclick="openLightbox(this.src)">
        {% endfor %}

      </div>
    </section>

    <!-- REPORT -->
    <section id="report" hidden>
      <h2>Report</h2>

      {% if report %}
      <iframe src="{{ url_for('static', filename='reports/'+report) }}" width="100%" height="700"></iframe>
      {% else %}
      <p class="muted">No report uploaded</p>
      {% endif %}
    </section>

  </main>
</div>


<!-- Lightbox -->
<div class="lightbox" id="lightbox" onclick="closeLightbox()">
  <img id="lightboxImg">
</div>


<script>
const buttons=[...document.querySelectorAll("nav button")]
const sections=[...document.querySelectorAll("main section")]

buttons.forEach(btn=>{
  btn.onclick=()=>{
    buttons.forEach(b=>b.classList.remove("active"))
    btn.classList.add("active")

    sections.forEach(s=>s.hidden=true)
    document.getElementById(btn.dataset.tab).hidden=false
  }
})

function openLightbox(src){
  const lb=document.getElementById("lightbox")
  const img=document.getElementById("lightboxImg")
  img.src=src
  lb.classList.add("open")
}

function closeLightbox(){
  document.getElementById("lightbox").classList.remove("open")
}
</script>

</body>
</html>
